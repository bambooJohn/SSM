<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bambooJohn.mapper.EmpMapper">
	
	<!-- 
		<if test = ""></if>:通过test表达式，拼接SQL
		<where>:添加where关键字，同时去掉多余的and
	 -->
	
	<!-- List<Emp> getEmpListByMoreTJ(Emp emp) -->
	<select id="getEmpListByMoreTJ1" resultType="emp">
		select 
		eid,ename,age,sex
		from
		emp
		<where>
			<if test = "eid != null">
				and eid = #{eid}
			</if>
			<if test = "ename != null and ename != ''">
				and ename = #{ename}
			</if>
			<if test = "age != null">
				and age = #{age}
			</if>
			<if test = "sex == 1 or sex == 0">
				and sex= #{sex}
			</if>
		</where>
		
	</select>
	
	<!-- 
		<trim prefix="" suffix="" prefixOverrides="" suffixOverrides="">:截取并拼接
	 	prefix:在操作的SQL语句前加入某些内容
	 	suffix:在操作的SQL语句后加入某些内容
	 	prefixOverrides:把操作的SQL语句前的某些内容去掉
	 	suffixOverrides:把操作的SQL语句后的某些内容去掉
	 
	 -->
	<!-- List<Emp> getEmpListByMoreTJ(Emp emp) -->
	<select id="getEmpListByMoreTJ" resultType="emp">
		select 
		eid,ename,age,sex
		from
		emp
		<trim prefix="where" suffixOverrides="and|or">
			<if test = "eid != null">
				eid = #{eid} and
			</if>
			<if test = "ename != null and ename != ''">
				ename = #{ename} and
			</if>
			<if test = "age != null">
				age = #{age} or
			</if>
			<if test = "sex == 1 or sex == 0">
				sex= #{sex}
			</if>
		</trim>
		
	</select>
	
	
	<!-- 
		<choose>:选择某一个when或otherwise拼接SQL
			<when test=""></when>:通过test表达式拼接SQL
			。
			。
			。
			<otherwise></otherwise>：当when都不符合条件，就会选择otherwise拼接SQL
		</choose>
	 -->
	<!-- void insertEmp(Emp emp); -->
	<insert id="insertEmp">
		insert into emp(eid,ename,age,sex) values(
			null,
			#{ename},
			#{age},
			<choose>
				<when test="sex == 1">'男'</when>
				<when test="sex == 0">'女'</when>
				<otherwise>'不详'</otherwise>
			</choose>
		)
		
	</insert>
	
	
	
</mapper>